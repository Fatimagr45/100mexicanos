<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jugador - 100 Mexicanos Dijeron</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="firebase-config.js"></script>
<style>
  body { text-align: center; font-family: Arial; background: #ff9800; color: white; }
  h1 { margin-top: 40px; }
  button { padding: 20px 40px; font-size: 1.5em; margin-top: 20px; cursor: pointer; border-radius: 10px; border: none; background: #009688; color: white; }
</style>
</head>
<body>
<h1>ðŸ”¥ 100 Mexicanos Dijeron ðŸ”¥</h1>
<p id="status">Esperando inicio...</p>
<button id="buzzBtn" disabled>Â¡Presiona!</button>

<script>
const buzzBtn = document.getElementById("buzzBtn");
const statusEl = document.getElementById("status");
const playerName = prompt("Escribe tu nombre:");

const juegoRef = db.ref("juego");

// Escuchar cambios en Firebase
juegoRef.on("value", snapshot => {
  const data = snapshot.val();
  if(!data) return;

  // Mostrar cuenta regresiva
  if(data.estado === "cuenta") {
    buzzBtn.disabled = true;
    statusEl.textContent = `Â¡Comenzando en ${data.contador}s!`;
  }

  // Ronda activa, botÃ³n habilitado
  if(data.estado === "activo") {
    buzzBtn.disabled = false;
    statusEl.textContent = "Â¡Ronda iniciada! Presiona el botÃ³n";
  }

  // Esperando inicio
  if(data.estado === "esperando") {
    buzzBtn.disabled = true;
    statusEl.textContent = "Esperando inicio...";
  }

  // Mostrar ganador
  if(data.ganador) {
    buzzBtn.disabled = true;
    statusEl.textContent = `Â¡Ganador: ${data.ganador}!`;
  }
});

// Registrar quiÃ©n presiona primero
buzzBtn.addEventListener("click", () => {
  juegoRef.child("ganador").once("value", snapshot => {
    if(!snapshot.exists()) {
      juegoRef.update({ ganador: playerName });
    }
  });
});
</script>
</body>
</html>
